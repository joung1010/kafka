## 카프카 생태계

Apache Kafka는 분산 스트리밍 플랫폼으로, 대용량의 실시간 데이터를 안정적으로 처리하고 저장할 수 있는 시스템입니다. Kafka 생태계는 이러한 Kafka의 핵심 기능을 중심으로 다양한 도구와 라이브러리들이 결합되어 구성된 환경을 의미하며, 이를 통해 데이터 파이프라인, 실시간 스트림 처리, 이벤트 기반 아키텍처 등 다양한 용도의 시스템을 구축할 수 있습니다.

다음은 Kafka 생태계를 구성하는 주요 구성 요소들입니다:

### 1. 프로듀서 (Producer)

- **역할**:프로듀서는 데이터를 생성하여 Kafka 클러스터 내 특정 토픽(topic)에 메시지를 전송하는 역할을 합니다.
- **주요 특징**:
    - **메시지 전송**: 키-값 쌍의 메시지를 전송하며, 메시지의 파티셔닝을 통해 분산 저장 및 부하 분산을 지원합니다.
    - **전송 옵션**: 동기적/비동기적 전송, 전송 보증(acknowledgment) 등의 옵션을 통해 데이터의 안정적 전달을 보장합니다.
    - **확장성**: 여러 프로듀서를 통해 대용량 데이터의 병렬 처리가 가능하며, 다양한 클라이언트 라이브러리(Java, Python, C++ 등)를 이용해 손쉽게 통합할 수 있습니다.

---

### 2. Kafka Connect

- **역할**:Kafka Connect는 Kafka 클러스터와 외부 시스템 간의 데이터 이동을 자동화하는 프레임워크입니다.
- **주요 특징**:
    - **Source 커넥터**: 외부 데이터 소스(예: 데이터베이스, 로그 파일, 클라우드 서비스 등)에서 데이터를 추출하여 Kafka 토픽에 기록합니다.(프로듀서 역할)
    - **Sink 커넥터**: Kafka 토픽에 저장된 데이터를 외부 시스템(예: 데이터 웨어하우스, 검색 엔진,JDBC, Elasticsearch 등)으로 내보냅니다.(컨슈머 역할)
    - **플러그인 기반 확장성**: 다양한 커넥터를 플러그인 형태로 지원하여, 새로운 데이터 소스나 싱크를 쉽게 추가할 수 있습니다.
    - **운영 자동화**: 분산 환경에서의 데이터 이동을 간소화하고, 스케일 아웃 및 모니터링 기능을 제공합니다.

---

### 3. 카프카 클러스터 (Kafka Cluster)

- **역할**:Kafka 클러스터는 데이터의 중심 저장소이자 전송의 허브 역할을 하며, 여러 브로커(노드)로 구성된 분산 시스템입니다.
- **주요 특징**:
    - **분산 저장 및 처리**: 각 브로커는 토픽의 여러 파티션을 저장하며, 리더-팔로워 복제 구조를 통해 데이터의 고가용성과 내결함성을 유지합니다.
    - **확장성**: 필요에 따라 브로커를 추가하여 데이터 처리량과 저장 용량을 확장할 수 있습니다.
    - **실시간 스트리밍**: 대용량의 데이터 스트림을 안정적으로 처리하며, 메시지 순서 보장 및 빠른 읽기/쓰기 성능을 제공합니다.

---

### 4. Kafka Streams

- **역할**:Kafka Streams는 Kafka 토픽에 저장된 실시간 데이터를 처리하는 자바 기반의 라이브러리로, 애플리케이션 내부에서 스트림 처리 로직을 구현할 수 있도록 지원합니다.
- **주요 특징**:
    - **실시간 데이터 처리**: 스트림 필터링, 집계, 조인, 상태 저장 연산 등 복잡한 데이터 처리 작업을 손쉽게 구현할 수 있습니다.
    - **내장형 라이브러리**: 별도의 클러스터 구성 없이 애플리케이션 내에서 직접 실행되어, 기존 Kafka 클러스터와 자연스럽게 연동됩니다.
    - **상태 관리**: 내장 상태 저장소를 사용하여, 윈도우 연산이나 집계 등의 작업에서 상태를 유지하며, 장애 복구 기능도 지원합니다.

---

### 5. 컨슈머 (Consumer) 및 스트림즈 컨슈머

- **일반 Kafka Consumer**:
    - **역할**: Kafka 클러스터의 특정 토픽에 기록된 메시지를 구독(subscribe)하여 읽어들이고, 비즈니스 로직에 따라 데이터를 처리합니다.
    - **주요 특징**:
        - **파티션 병렬 처리**: 동일한 컨슈머 그룹 내에서 파티션 단위로 메시지를 병렬로 처리하여 높은 처리량을 달성합니다.
        - **오프셋 관리**: 처리한 메시지의 위치(오프셋)를 관리하여, 장애 발생 시 재처리나 복구가 가능하도록 합니다.
- **스트림즈 컨슈머**:
    - **역할**: Kafka Streams 애플리케이션 내부에서 처리된 결과 데이터를 소비하는 역할을 하거나, 외부 애플리케이션이 Kafka Streams 애플리케이션에서 생성한 토픽을 구독하는 형태로 사용됩니다.
    - **주요 특징**:
        - **실시간 분석 후속 처리**: Kafka Streams로 처리된 데이터를 기반으로 추가적인 실시간 분석, 모니터링 또는 후속 ETL 작업을 수행할 수 있습니다.
        - **통합 처리 파이프라인**: 스트림 처리와 일반 컨슈머의 역할이 결합되어, 실시간 처리와 결과 소비가 유기적으로 이루어집니다.